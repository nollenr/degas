<% provide(:title, 'Bottle Index') %>

<div class="hero-unit hero-unit-bottle-index">
  <h1>Cellar List</h1>
</div>

<hr />
<p>
  Download:
  <%= link_to "CSV", bottles_path(format: "csv") %>
</p>
<div class="row-fluid">               <!-- enclosing row start -->
  <div class="span12">                <!-- enclosing row size start -->
    <div id="searchForm" class="well well-small" >    <!-- well opening -->

      <h2 class="search-title">Search</h2>

      <%= search_form_for @search, html: {class: "form-inline search-form"}, remote: true do |f| %>
        <div class="row-fluid">                <!-- search row1 start-->
          <div class="span10">            <!-- search options column1 size start --> 
            <div class="search-inputs" >
              <label>Bottle Id</label>
              <%= f.text_field :bottle_id_eq, class: "input-small", placeholder: "Bottle Id"%>

              <label>Winery Name</label>  
              <%= f.text_field :winery_name_cont, class: "input-small", placeholder: "Wine Name"%>

              <label>Grape</label>
              <%= f.text_field :grape_name_cont, class: "input-small", placeholder: "Grape"%>

              <span class="search-dropdown">
                <%= f.collection_select :grape_color_eq, Grape.select(:color).uniq, :color, :color, {include_blank: 'Wine Color'}, {class: "input-medium"} %>
              </span>
            </div>
          </div>                <!-- search options column1 size end -->
          <div class="span2">   <!-- serach button column2 size start -->
            <%= f.submit "Update List", class: "btn"%> 
            <%= link_to  "Clear Search", bottles_path, class: "btn"%>
            <!-- %= f.submit  "Clear Search", id: "clearSearch" % -->
          </div>                <!-- serach button column2 size end -->
        </div>                  <!-- search row1 end-->

        <div class="row-fluid">
          <!-- 2nd row in the well for the checkbox list of bottle types -->
          <div class="span2 checkbox inline search-bottle-type-span">
            <span class="search-bottle-type-label"> Bottle Types </span>
          </div>
          <div class="span8 checkbox inline search-bottle-type-span">
            <% BottleType.order(:display_order).pluck(:name).each do |xtype| %>
              <% xyz = params[:q][:bottle_type_name_in] %>
              <% if !xyz.nil? %>
                <% checked = params[:q][:bottle_type_name_in].include?(xtype) %>
              <% else %>
                <% checked = false %>
              <% end %>
              <label class="search-checkbox-type" > <%= check_box_tag 'q[bottle_type_name_in][]', xtype, checked %><%= xtype %></label>
            <% end %>
          </div>
          <!-- end span12 -->
        </div>
        <!-- end the 2nd row in the well -->
        
        <div class="row-fluid"><div class="span12">
              Show Only Available Bottles 
              <%= f.check_box :available_true, class: "checkbox inline input-small search-query", checked: true %> 
          </div>
        </div>

        <%= hidden_field_tag :direction, params[:direction] %>
        <%= hidden_field_tag :sort, sort_column  %>
    
      <% end %>
    </div>                    <!-- well close -->
  </div>                      <!-- enclosing row size end -->
</div>                        <!-- enclosing row end -->

<hr />

<%= render partial: "bottle_header" %>

