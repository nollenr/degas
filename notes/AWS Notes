installed the key into ~/.ec2


ssh -i ~/.ec2/liszt-keypair.pem -X ec2-user@ec2-54-200-81-97.us-west-2.compute.amazonaws.com
sudo su -

The production/development switch is in /etc/httpd/conf/httpd.conf

httpd Conf settings for accessing S3 from EC2
<VirtualHost *:80>
    ServerAdmin ron.nollen@me.com
    DocumentRoot /home/appman/rails/degas/public
    <Directory /home/appman/rails/degas/public>
      AllowOverride all
      Order deny,allow
      Allow from all
      Options -MultiViews
    </Directory>
    RailsEnv production
    ServerName degas.com
    ErrorLog logs/degas.com-error_log
    CustomLog logs/degas.com-access_log common
    SetEnv AWS_BUCKET degas-prod-bucket01
    SetEnv AWS_ACCESS_KEY_ID AKIAJSGNRZAGAVGX7OAA
    SetEnv AWS_SECRET_ACCESS_KEY 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
</VirtualHost>

The application is owned by:
appman


As root
----------------------------
Stop http
service httpd stop

Postgres
service postgresql status

As appman
----------------------------
rvm gemset use rails3214

cp rails/degas/.git/config /home/appman/.
cd /home/appman/rails
rm -rf degas
mkdir degas
cd degas
git init
mv home/appman/config /home/appman/rails/degas/.git/.
git pull

cd /home/appman/rails/degas/config
cp database.yml.liszt.aws database.yml

bundle install --local
RAILS_ENV=production rake db:migrate

rake assets:precompile
RAILS_ENV=production bundle exec rake assets:precompile

As root
----------------------------
cp /home/appman/rails/degas/notes/EC2.etc.httpd.conf.httd.conf /etc/httd/conf/httpd.conf
